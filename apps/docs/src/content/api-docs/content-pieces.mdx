import { Description } from "./description.tsx";
import { Important } from "./important.tsx";

# Content pieces

**Content pieces** are at the heart of Vrite - all content you create, as well as all the related metadata is stored across many content pieces.

## Retrieve full content piece

Retrieves detailed information on a single, content piece, including detailed tags information and, optionally, its full content - in HTML or JSON format.

<Description
  method="GET"
  endpoint="/content-pieces"
  parameters={[
    {
      name: "id",
      type: `string`,
      description: "Content piece ID",
      required: true
    },
    {
      name: "content",
      type: `"html" | "json"`,
      description: "Indicates whether to retrieve the actual content and in what format"
    }
  ]}
  responseExamples={[
    {
      data: {contentPiece:{
  "title": "Example article",
  "slug": "example-article",
  "locked": false,
  "description": "<p></p>",
  "tags": [],
  "coverUrl": "",
  "coverAlt": "",
  "coverWidth": "",
  "contentGroupId":"63f64bd74374bba6c3417ca0",
  "customData": {
    "custom": {
      "nested": ["metadata"]
    }
  },
  "id": "63f29c0dc69297c660e48be9",
  "content": {
    "type": "doc",
    "content": [
      {
        "type": "paragraph",
        "content": [
          {
            "type": "text",
            "text": "Hello World"
          }
        ]
      }
    ]
  }
}}
,
      name: "Success",
      id: "success"
    },
    { data: {
        message: "Input validation failed",
        code: "BAD_REQUEST",
        issues: [
          {
            code: "invalid_type",
            expected: "string",
            received: "undefined",
            path: [
              "id"
            ],
            message: "Required"
          }
        ]
      },
      name: "Bad request",
      id: "bad-request"
    }
]}

> </Description>

## Retrieve multiple content pieces

Retrieves basic information about multiple content pieces with pagination and optional filtering by [content group](/docs#using-api-content-groups) or/and [tag](/docs#using-api-tags).

<Description
  method="GET"
  endpoint="/content-pieces/list"
  parameters={[
    {
      name: "contentGroupId",
      type: "string",
      description: `Content group ID to filter by`
    },
    {name:"slug",type:"string", description:"Article slug to filter by"},
    {
      name: "tagId",
      type: `string`,
      description: "Tag ID to filter by"
    },

    {
      name: "perPage",
      type: `number`,
      description: "Limits the number of results in a single request.",
      default:20
    },
    {
      name: "page",
      type: `number`,
      description: "Page of the results.",
      default:1
    }

]}
responseExamples={[{
data: [
{
"title": "Example article",
"slug": "example-article",
"description": "<p></p>",
"tags": [
"63f29c0dc69297c660e48be9"
],
"coverUrl": "",
"coverAlt": "",
"coverWidth": "",
"customData": {
"custom": {
"nested": ["metadata"]
}
},
"id": "63f29c0dc69297c660e48be9",
}
],
name:"Success",
id:"success"
},{data:{
"message": "Input validation failed",
"code": "BAD_REQUEST",
"issues": [
{
"validation": "regex",
"code": "invalid_string",
"message": "invalid id",
"path": [
"contentGroupId"
]
}
]
},name:"Bad request",id:"bad-request"}]}

> </Description>

## Create or update content piece

Provided an ID, updates the matching content piece' metadata with given information. If no matching content piece is found or
no ID is provided, a new content piece is created.

<Important>`contentGroupId` is required when creating a new content piece</Important>

<Description
  method="PUT"
  endpoint="/content-pieces"
  body={{
    schema: "/content-pieces/schema",
    example: {
      title: "New article",
      tags: [],
      coverUrl: "",
      coverAlt: "",
      coverWidth: "",
      customData: {},
      contentGroupId: "63efc451cf034ba9ca007e47"
    }
  }}
  responseExamples={[
    { data: { id: "63efc451cf034ba9ca007e47" }, name: "Success", id: "success" },
    {data: {
  "message": "Input validation failed",
  "code": "BAD_REQUEST",
  "issues": [
    {
      "code": "custom",
      "message": "contentGroupId required when creating new content piece",
      "path": []
    }
  ]
}

,name:"Bad request", id:"bad-request"}
]}

> </Description>

## Delete content piece

Provided an ID, deletes content and metadata of the matching piece and returns its ID. If no matching content piece is found (and deleted)
it returns `null`.

<Description
  method="DELETE"
  endpoint="/content-pieces"
  responseExamples={[{ data: { id: "63efc451cf034ba9ca007e47" }, name: "Success", id: "success" }, {name:"Bad request",id:"bad request",data:{
  "message": "Input validation failed",
  "code": "BAD_REQUEST",
  "issues": [
    {
      "code": "invalid_type",
      "expected": "string",
      "received": "undefined",
      "path": [
        "id"
      ],
      "message": "Required"
    }
  ]
}

}]}
parameters={[
{ name: "id", type: "string", description: "ID of the content piece to delete", required: true }
]}

> </Description>
